{"ast":null,"code":"import _slicedToArray from\"/home/crazy_reborn/the_odin_project/jhunt-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useLocation,useParams}from'react-router-dom';import{format}from'date-fns';import parseISO from'date-fns/parseISO';import LoadingSpinner from'../LoadingSpinner';import ApplicationDelete from'./ApplicationDelete';import ApplicationUpdateForm from'./ApplicationUpdateForm';import ErrorPopUp from'./ErrorPopUp';import CanvasJsReactComponent from'../../canvasjs.react';import'../../styles/ApplicationDetailed.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var CanvasJsChart=CanvasJsReactComponent.CanvasJSChart;export default function ApplicationDetailed(){var _useParams=useParams(),id=_useParams.id;var _useLocation=useLocation(),state=_useLocation.state;var salaryAllAvg=state.salaryAllAvg,salaryUsrAvg=state.salaryUsrAvg;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),application=_useState2[0],setApplication=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loaded=_useState6[0],setLoaded=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),updating=_useState8[0],setUpdating=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),gotErr=_useState10[0],setGotErr=_useState10[1];useEffect(function(){fetch(\"\".concat(process.env.REACT_APP_API_SERVER,\"applications/\").concat(id),{method:'GET',credentials:'include'}).then(function(res){return res.json();}).then(function(json){if(json.application!==undefined){setApplication(json.application);setLoaded(true);}else{setErrors(json.err.errors);setLoaded(true);}}).catch(function(err){return setErrors([err]);}).finally(function(){if(errors.length>0){setGotErr(true);}else{setGotErr(false);}});},[updating]);var chartOptions={title:{text:'Salary comparison'},data:[{type:'bar',dataPoints:[{y:application.salary,label:'This'},{y:application.salary,label:'This'}]},{type:'bar',dataPoints:[{y:Math.round(salaryAllAvg),label:'All Users Applications'},{y:Math.round(salaryUsrAvg),label:'All Of Your Applications'}]}]};return loaded?/*#__PURE__*/_jsxs(\"div\",{className:\"container-detailed\",children:[/*#__PURE__*/_jsxs(\"article\",{className:\"detailed\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:['Company: ',application.company_name]}),/*#__PURE__*/_jsxs(\"p\",{children:['Position: ',application.position]}),/*#__PURE__*/_jsxs(\"p\",{children:['Salary: ',application.salary,\"PLN per month\"]}),/*#__PURE__*/_jsxs(\"p\",{children:['Status: ',application.status]}),/*#__PURE__*/_jsxs(\"p\",{children:['Date: ',typeof application.date==='undefined'?'':format(parseISO(application.date),'yyyy-MM-dd')]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:application.jobLink,target:\"_blank\",rel:\"noreferrer\",children:\"Job link\"})}),/*#__PURE__*/_jsxs(\"p\",{children:['Qualifications: ',application.qualifications_met]}),/*#__PURE__*/_jsxs(\"div\",{className:\"application-btns\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-update\",type:\"button\",onClick:function onClick(){return setUpdating(true);},children:\"Update\"}),/*#__PURE__*/_jsx(ApplicationDelete,{application:application})]}),/*#__PURE__*/_jsx(ApplicationUpdateForm,{updating:updating,setUpdating:setUpdating,application:application}),gotErr&&/*#__PURE__*/_jsx(ErrorPopUp,{errors:errors,gotErr:gotErr,setGotErr:setGotErr})]}),/*#__PURE__*/_jsx(CanvasJsChart,{className:\"chart\",options:chartOptions})]}):/*#__PURE__*/_jsx(LoadingSpinner,{});}","map":{"version":3,"sources":["/home/crazy_reborn/the_odin_project/jhunt-client/src/components/Applications/ApplicationDetailed.js"],"names":["React","useEffect","useState","useLocation","useParams","format","parseISO","LoadingSpinner","ApplicationDelete","ApplicationUpdateForm","ErrorPopUp","CanvasJsReactComponent","CanvasJsChart","CanvasJSChart","ApplicationDetailed","id","state","salaryAllAvg","salaryUsrAvg","application","setApplication","errors","setErrors","loaded","setLoaded","updating","setUpdating","gotErr","setGotErr","fetch","process","env","REACT_APP_API_SERVER","method","credentials","then","res","json","undefined","err","catch","finally","length","chartOptions","title","text","data","type","dataPoints","y","salary","label","Math","round","company_name","position","status","date","jobLink","qualifications_met"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport parseISO from 'date-fns/parseISO';\nimport LoadingSpinner from '../LoadingSpinner';\nimport ApplicationDelete from './ApplicationDelete';\nimport ApplicationUpdateForm from './ApplicationUpdateForm';\nimport ErrorPopUp from './ErrorPopUp';\nimport CanvasJsReactComponent from '../../canvasjs.react';\nimport '../../styles/ApplicationDetailed.css';\n\nconst CanvasJsChart = CanvasJsReactComponent.CanvasJSChart;\n\nexport default function ApplicationDetailed() {\n  const { id } = useParams();\n  const { state } = useLocation();\n  const { salaryAllAvg, salaryUsrAvg } = state;\n  const [application, setApplication] = useState('');\n  const [errors, setErrors] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [updating, setUpdating] = useState(false);\n  const [gotErr, setGotErr] = useState(false);\n\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_API_SERVER}applications/${id}`, {\n      method: 'GET',\n      credentials: 'include',\n    })\n      .then((res) => res.json())\n      .then((json) => {\n        if (json.application !== undefined) {\n          setApplication(json.application);\n          setLoaded(true);\n        } else {\n          setErrors(json.err.errors);\n          setLoaded(true);\n        }\n      })\n      .catch((err) => setErrors([err]))\n      .finally(() => {\n        if (errors.length > 0) {\n          setGotErr(true);\n        } else {\n          setGotErr(false);\n        }\n      });\n  }, [updating]);\n\n  const chartOptions = {\n    title: {\n      text: 'Salary comparison',\n    },\n    data: [{\n      type: 'bar',\n      dataPoints: [\n        { y: application.salary, label: 'This' },\n        { y: application.salary, label: 'This' },\n      ],\n    }, {\n      type: 'bar',\n      dataPoints: [\n        { y: Math.round(salaryAllAvg), label: 'All Users Applications' },\n        { y: Math.round(salaryUsrAvg), label: 'All Of Your Applications' },\n      ],\n    },\n    ],\n  };\n\n  return (\n    loaded\n      ? (\n        <div className=\"container-detailed\">\n          <article className=\"detailed\">\n            <h2>\n              {'Company: '}\n              {application.company_name}\n            </h2>\n            <p>\n              {'Position: '}\n              {application.position}\n            </p>\n            <p>\n              {'Salary: '}\n              {application.salary}\n              PLN per month\n            </p>\n            <p>\n              {'Status: '}\n              {application.status}\n            </p>\n            <p>\n              {'Date: '}\n              {typeof application.date === 'undefined'\n                ? ''\n                : format(parseISO(application.date), 'yyyy-MM-dd')}\n            </p>\n            <p>\n              <a\n                href={application.jobLink}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                Job link\n              </a>\n            </p>\n            <p>\n              {'Qualifications: '}\n              {application.qualifications_met}\n            </p>\n            <div className=\"application-btns\">\n              <button\n                className=\"btn-update\"\n                type=\"button\"\n                onClick={() => setUpdating(true)}\n              >\n                Update\n              </button>\n              <ApplicationDelete application={application} />\n            </div>\n            <ApplicationUpdateForm\n              updating={updating}\n              setUpdating={setUpdating}\n              application={application}\n            />\n            {gotErr && <ErrorPopUp errors={errors} gotErr={gotErr} setGotErr={setGotErr} />}\n          </article>\n          <CanvasJsChart className=\"chart\" options={chartOptions} />\n        </div>\n      )\n      : <LoadingSpinner />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}