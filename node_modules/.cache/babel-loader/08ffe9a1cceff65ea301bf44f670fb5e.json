{"ast":null,"code":"var _jsxFileName = \"/home/crazy_reborn/the_odin_project/jhunt-client/src/components/Applications/ApplicationDetailed.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport parseISO from 'date-fns/parseISO';\nimport LoadingSpinner from '../LoadingSpinner';\nimport ApplicationDelete from './ApplicationDelete';\nimport ApplicationUpdateForm from './ApplicationUpdateForm';\nimport ErrorPopUp from './ErrorPopUp';\nimport CanvasJsReactComponent from '../../canvasjs.react';\nimport '../../styles/ApplicationDetailed.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CanvasJsChart = CanvasJsReactComponent.CanvasJSChart;\nexport default function ApplicationDetailed() {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const {\n    state\n  } = useLocation();\n  const {\n    salaryAllAvg,\n    salaryUsrAvg\n  } = state;\n  const [application, setApplication] = useState('');\n  const [errors, setErrors] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [updating, setUpdating] = useState(false);\n  const [gotErr, setGotErr] = useState(false);\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_API_SERVER}applications/${id}`, {\n      method: 'GET',\n      credentials: 'include'\n    }).then(res => res.json()).then(json => {\n      if (json.application !== undefined) {\n        setApplication(json.application);\n        setLoaded(true);\n        console.log(salaryAllAvg);\n        console.log(salaryUsrAvg);\n      } else {\n        setErrors(json.err.errors);\n        setLoaded(true);\n      }\n    }).catch(err => setErrors([err])).finally(() => {\n      if (errors.length > 0) {\n        setGotErr(true);\n      } else {\n        setGotErr(false);\n      }\n    });\n  }, [updating]);\n  const chartOptions = {\n    title: {\n      text: 'Salary comparison'\n    },\n    data: [{\n      type: 'bar',\n      dataPoints: [{\n        y: application.salary,\n        label: 'This'\n      }, {\n        y: salaryAllAvg,\n        label: 'Average All Users'\n      }]\n    }]\n  };\n  return loaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"article\", {\n      className: \"detailed\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: ['Company: ', application.company_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: ['Position: ', application.position]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: ['Salary: ', application.salary, \"PLN per month\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: ['Status: ', application.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: ['Date: ', typeof application.date === 'undefined' ? '' : format(parseISO(application.date), 'yyyy-MM-dd')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: application.jobLink,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: \"Job link\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: ['Qualifications: ', application.qualifications_met]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"application-btns\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-update\",\n          type: \"button\",\n          onClick: () => setUpdating(true),\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(ApplicationDelete, {\n          application: application\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ApplicationUpdateForm, {\n        updating: updating,\n        setUpdating: setUpdating,\n        application: application\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ErrorPopUp, {\n        errors: errors,\n        gotErr: gotErr,\n        setGotErr: setGotErr\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(CanvasJsChart, {\n      options: chartOptions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ApplicationDetailed, \"xCJ03CRhdc6HyfP3PFhKL5IOY68=\", false, function () {\n  return [useParams, useLocation];\n});\n\n_c = ApplicationDetailed;\n\nvar _c;\n\n$RefreshReg$(_c, \"ApplicationDetailed\");","map":{"version":3,"sources":["/home/crazy_reborn/the_odin_project/jhunt-client/src/components/Applications/ApplicationDetailed.js"],"names":["React","useEffect","useState","useLocation","useParams","format","parseISO","LoadingSpinner","ApplicationDelete","ApplicationUpdateForm","ErrorPopUp","CanvasJsReactComponent","CanvasJsChart","CanvasJSChart","ApplicationDetailed","id","state","salaryAllAvg","salaryUsrAvg","application","setApplication","errors","setErrors","loaded","setLoaded","updating","setUpdating","gotErr","setGotErr","fetch","process","env","REACT_APP_API_SERVER","method","credentials","then","res","json","undefined","console","log","err","catch","finally","length","chartOptions","title","text","data","type","dataPoints","y","salary","label","company_name","position","status","date","jobLink","qualifications_met"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport parseISO from 'date-fns/parseISO';\nimport LoadingSpinner from '../LoadingSpinner';\nimport ApplicationDelete from './ApplicationDelete';\nimport ApplicationUpdateForm from './ApplicationUpdateForm';\nimport ErrorPopUp from './ErrorPopUp';\nimport CanvasJsReactComponent from '../../canvasjs.react';\nimport '../../styles/ApplicationDetailed.css';\n\nconst CanvasJsChart = CanvasJsReactComponent.CanvasJSChart;\n\nexport default function ApplicationDetailed() {\n  const { id } = useParams();\n  const { state } = useLocation();\n  const { salaryAllAvg, salaryUsrAvg } = state;\n  const [application, setApplication] = useState('');\n  const [errors, setErrors] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [updating, setUpdating] = useState(false);\n  const [gotErr, setGotErr] = useState(false);\n\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_API_SERVER}applications/${id}`, {\n      method: 'GET',\n      credentials: 'include',\n    })\n      .then((res) => res.json())\n      .then((json) => {\n        if (json.application !== undefined) {\n          setApplication(json.application);\n          setLoaded(true);\n          console.log(salaryAllAvg);\n          console.log(salaryUsrAvg);\n        } else {\n          setErrors(json.err.errors);\n          setLoaded(true);\n        }\n      })\n      .catch((err) => setErrors([err]))\n      .finally(() => {\n        if (errors.length > 0) {\n          setGotErr(true);\n        } else {\n          setGotErr(false);\n        }\n      });\n  }, [updating]);\n\n  const chartOptions = {\n    title: {\n      text: 'Salary comparison',\n    },\n    data: [{\n      type: 'bar',\n      dataPoints: [\n        { y: application.salary, label: 'This' },\n        { y: salaryAllAvg, label: 'Average All Users' },\n      ],\n    }],\n  };\n\n  return (\n    loaded\n      ? (\n        <div>\n          <article className=\"detailed\">\n            <h2>\n              {'Company: '}\n              {application.company_name}\n            </h2>\n            <p>\n              {'Position: '}\n              {application.position}\n            </p>\n            <p>\n              {'Salary: '}\n              {application.salary}\n              PLN per month\n            </p>\n            <p>\n              {'Status: '}\n              {application.status}\n            </p>\n            <p>\n              {'Date: '}\n              {typeof application.date === 'undefined'\n                ? ''\n                : format(parseISO(application.date), 'yyyy-MM-dd')}\n            </p>\n            <p>\n              <a\n                href={application.jobLink}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                Job link\n              </a>\n            </p>\n            <p>\n              {'Qualifications: '}\n              {application.qualifications_met}\n            </p>\n            <div className=\"application-btns\">\n              <button\n                className=\"btn-update\"\n                type=\"button\"\n                onClick={() => setUpdating(true)}\n              >\n                Update\n              </button>\n              <ApplicationDelete application={application} />\n            </div>\n            <ApplicationUpdateForm\n              updating={updating}\n              setUpdating={setUpdating}\n              application={application}\n            />\n            <ErrorPopUp errors={errors} gotErr={gotErr} setGotErr={setGotErr} />\n          </article>\n          <CanvasJsChart options={chartOptions} />\n        </div>\n      )\n      : <LoadingSpinner />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}